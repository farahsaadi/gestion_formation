{% extends 'base.html.twig' %}

{% block title %}Recherche Sessions par Formation{% endblock %}

{% block body %}
<h1>Recherche Sessions par Formation</h1>

{{ form_start(form) }}
    {{ form_row(form.formation) }}
    <button class="btn btn-primary">Rechercher</button>
{{ form_end(form) }}

<hr>

{% if sessions is defined %}
    <h2>Résultat :</h2>

    {% if sessions %}
        <table class="table table-bordered">
            <tr>
                <th>Date début</th>
                <th>Date fin</th>
                <th>Lieu</th>
                <th>Apprenants</th>
            </tr>

            {% for session in sessions %}
                <tr>
                    <td>{{ session.dateDebut|date('Y-m-d') }}</td>
                    <td>{{ session.dateFin|date('Y-m-d') }}</td>
                    <td>{{ session.lieu }}</td>
                  <td>
    {% if session.apprenants|length > 0 %}
        {% for apprenant in session.apprenants %}
            {{ apprenant.nom }} {{ apprenant.prenom }}
            {% if not loop.last %}, {% endif %}
        {% endfor %}
    {% else %}
        Aucun
    {% endif %}
</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <div class="alert alert-warning">Aucune session trouvée</div>
    {% endif %}
{% endif %}
{% endblock %}
